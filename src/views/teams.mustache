<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Backoffice</title>
</head>

<body>
    <h1>Backoffice</h1>
    <!-- 
        Não adicionei nada para o "View Team Players", não sei se queres sequer manter esse botão.
        Pensei em fazer outro ficheiro mustache para mostrar os jogadores da equipa, mas vai ser bués views probably.
        Podemos também fazer um modal, mas não sei como vai ficar


        Adicionei o código para o mustache mas não o testei (ainda falta adicionar o url do badge à base de dados)
    -->
    <!-- Tabela de Backoffice -->
    <div class="container">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Initials</th>
                    <th scope="col">Badge</th>
                    <th scope="col">Formed Year</th>
                    <th scope="col">Stadium</th>
                    <th scope="col">Country</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
            {{#teams}}
                <tr class="align-middle">
                    <td>{{team_name}}</td>
                    <td>{{team_initials}}</td>
                    <td><img src={{team_badge}}></td>
                    <td>{{team_formedYear}}</td>
                    <td>{{team_stadium}}</td>
                    <td>{{team_country}}</td>
                    <td>
                        <button type="button" class="btn btn-primary">View Players</button>
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
                        <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#editModal" style="color:#fff;">Edit</button>
                    </td>
                </tr>
            {{/teams}}
            </tbody>
        </table>
    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #e03444; color:#fff;">
                    <h5 class="modal-title" id="deleteModalLabel">Delete Team</h5>
                    <!--TODO: O botão não fica branco e já está tarde para eu arranjar isso, arranjamos depois :)-->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this team?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" id="btnDeleteConfirm" data-bs-dismiss="modal">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #ffcc2c; color:#fff;">
                    <h5 class="modal-title" id="editModalLabel">Edit Team</h5>
                    <!--TODO: O botão não fica branco e já está tarde para eu arranjar isso, arranjamos depois :)-->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editModalForm">
                        <div class="mb-3">
                            <label for="inputTeamName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="inputTeamName">
                        </div>
                        <div class="mb-3">
                            <label for="inputTeamInitials" class="form-label">Initials</label>
                            <input type="text" class="form-control" id="inputTeamInitials">
                        </div>
                        <div class="mb-3">
                            <label for="inputTeamFormedYear" class="form-label">Formed Year</label>
                            <input type="number" class="form-control" id="inputTeamFormedYear">
                        </div>
                        <div class="mb-3">
                            <label for="inputTeamStadium" class="form-label">Stadium</label>
                            <input type="text" class="form-control" id="inputTeamStadium">
                        </div>
                        <div class="mb-3">
                            <label for="inputTeamCountry" class="form-label">Country</label>
                            <input type="text" class="form-control" id="inputTeamCountry">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" onclick="editTeam({{team_id}})" class="btn btn-warning" id="btnEditConfirm" data-bs-dismiss="modal" form="editModalForm">Confirm Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle w/ Popper-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="/js/teams/fetch.js"> </script>
</body>
</html>